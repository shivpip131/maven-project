pipeline
{
agent any
stages
{
stage('scm checkout')
{
steps
{git 'https://github.com/shivpip131/maven-project.git'}
}
stage ('compile code') {
steps {
withMaven(jdk: 'jdklocal', maven: 'mavenlocal') {
    sh 'mvn compile'
}
}
}
stage ('test') {
steps {
withMaven(jdk: 'jdklocal', maven: 'mavenlocal') {
    sh 'mvn test'
    }
    }
    }
 stage ('build') {
 steps {
 withMaven(jdk: 'jdklocal', maven: 'mavenlocal') {
    sh 'mvn install'
    }
    }
    }
stage ('deploy to tomcat')
{
steps {
sshagent(['-----BEGIN RSA PRIVATE KEY----- MIIEpQIBAAKCAQEAr0n39bcvMroBc8B9kAQAuqR5THpZWDLMgUMPNj0udFx0HCd1RQ0YMAclYP4n wAGiT7w3m/KDZPAeXdeG3NIVMMxRQ7b5ZfQwfeS2QdXY/pOXJGAJ9a44Qz0q1Ng8HbWWaUKXhHNQ 9GYCEnVkxHle5G9G3lcH6OJPfoZoSoShBPNj8pBBw7IG6kyWIqqbwzTItJX/+K7/3NeBTlq26EOe Gc1DLokxdOxgqzvrSdQbutx1+NOriOOYVSgM1d1HU1oskmuBoYPEjUvD3esUbL5Z4npzCyBw2STf fNqt4J7M+JDZoROJ/wpgUCa3RBBwxkLRnBQwAUceZlZx/JhaV77DKQIDAQABAoIBAQCDrmyxUXEK iYNnwpZRJ0Co9cAN/Oe7g0XwYUE/PMz2KzIqqFXHjuO5yNSCvct8yX12qu2XoKKmpGAbnTq6DrRO mV7/IKjQt5XqLXPhl1XRQWzMrb0trDimAoB3rw3SP8UDxDvxC3Qoda1e0oPluUvZDeNOSlEt2T1g znXwbRxNi5AmYZi45fq3tG1i6KitE8C0BbPJvEr2lt//yv8Ygm/JhgF9HJb6uldFDTwavno4yIl2 87DPhpjGI47MRA1MsTznLQnNyrZW7pOmIEhmv/y7qTBXL4Il7Gzadb5CxgJ+bW021OH9ni9AqO7V NDR0Ry9IRpw10zNYZucf+0jQN+wVAoGBANPXNLdGXMqqv5Pu4Q3ZpVThQhvv2J+mWZ5Nl3v1u2tN xxxI/1UQ57mVq/VSFADi7tEBOVQnhlEdQTuL5eYs6fFN24iomeRdMks8qcOWMogzPC/lE+3zp7+B gyiWvGbIiG0mU48iJ/LIElcD7xuWEvheRGNmtGBljyvLpwUMwORHAoGBANPUMeaV0fgjX16q/zPV P3Mz4/IuSSLd3NN/vv+MP/jfLliXFYVZpe8MA1EYAGPE0LIutY2M47TGCRRAnjCwjpRWby2AUBDm sI1ziLIFgNMDJvekEja2YuYCnlJ1TmLw0d1OzmOv/nc1iZ4h12TWRkMJ5df9MJcvBMTg+9p2JAUP AoGBAINtvVMH4IIMtZc+WXqSUbT7nFxgzfEe7/L7CMTrjD/inWm7EE7ikiHd7jXhmm+CW9BoBf1k GD0y/UnIXfYUX4BKYa3DjNbVy2JKXLjv8qH1x52fbmHvDWAPJiSEgJb0S1AMu0LOWiKSZm5+Dlb7 IQHe2mchTT+RQuZVD2Zepz35AoGBAIhvPLC6wKFlDxEna/YTnKlzu5aJz1tgsNGcjwWDbNS70tsG fLsF8cVU5HH/1ohsBMsvIIqKO0N85e4gbIMJxNuwDC2vXmJ0YzTIPDwFJWNDvX51M7H/qRVijFyp 55H8b/9tuasleO2JExlBzLzK8jhNkLecAQbvJtAz5KNhwnNrAoGAEnatqCATkJy2eGZAyLRf+IN3 ncvHgpR/aRdkqXpPbbGJWd/BY4PDp3TXf/i1sJmsVqyA8QicOh4902H78SDDeINyZxBsQS3IIyvE A/8BCy78X1b8yz4Vx9u18PZL7WMejDeL9hifZCDSH1J2HtngOxvGKw5DMz6j4mVIQx7zEqs= -----END RSA PRIVATE KEY-----']) {
    sh ' scp -o StrictHostkey = no */target/*.war ec2-user@13.233.147.30:/usr/share/tomcat/conf'
}
}
}

}
}
